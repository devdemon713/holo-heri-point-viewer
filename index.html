<!doctype html>
<html lang="en">
  <head>
    <title>Konark Temple Interactive</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    
    <style>
      body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #f5f5f5;
      }

      model-viewer {
        width: 100%;
        height: 100vh;
      }

      /* MASTER TOGGLE BUTTON - Top Right */
      #info-master-button {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        padding: 12px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 50px;
        font-family: 'Segoe UI', sans-serif;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      }

      /* Annotation Box Styling */
      .HotspotAnnotation {
        display: none; 
        background: #ffffff;
        border-radius: 10px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        padding: 15px;
        position: absolute;
        width: 250px;
        left: 28px;
        top: -24px;
        color: #444;
        font-family: 'Segoe UI', sans-serif;
        font-size: 14px;
        line-height: 1.5;
        z-index: 100;
        pointer-events: none;
        border-left: 5px solid #007bff;
      }

      .HotspotAnnotation h3 { 
        margin: 0 0 5px 0; 
        font-size: 16px; 
        color: #007bff; 
        text-transform: uppercase;
      }

      /* Show info when active */
      .Hotspot.active .HotspotAnnotation {
        display: block !important;
      }

      /* Hotspot Dots */
      .Hotspot {
        display: none; /* Hidden until Master Button is clicked */
        background: #fff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        border: 3px solid #007bff;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      }

      .Hotspot.show-point {
        display: block;
      }

      /* AR BUTTON - Forced visibility for mobile */
      #ar-button {
        background-color: white;
        border-radius: 8px;
        border: 1px solid #dadce0;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        position: absolute;
        z-index: 9999;
        display: block !important;
        font-family: sans-serif;
        font-size: 14px;
        color: #007bff;
      }
    </style>
  </head>
  <body>

    <button id="info-master-button">Show Info Points</button>
       <button slot="ar-button" id="ar-button">
          ðŸ‘‹ View in your room
      </button>
    <model-viewer id="konark-viewer" 
                  src="finalKonark-v1 (4).glb" 
                  ar 
                  ar-modes="webxr scene-viewer quick-look" 
                  camera-controls 
                  tone-mapping="neutral" 
                  poster="poster.webp" 
                  shadow-intensity="1">

      <button class="Hotspot" slot="hotspot-1" data-position="0.11996549136712897m -0.660297867924796m -4.4235828999931535m" data-normal="-0.947823850017628m 0.25515014115177137m 0.1911239252631453m">
          <div class="HotspotAnnotation"><h3>Main Tower (Vimana)</h3>Principal shrine of the temple housing the main deity. Tallest structure, symbolizing Mount Meru. Built in the traditional Kalinga Rekha Deula style. Represents spiritual dominance and divine presence.</div>
      </button>

      <button class="Hotspot" slot="hotspot-3" data-position="0.8600527644693159m -1.810127178146242m -3.6297291483192353m" data-normal="0.9944476538041479m 0.09018357827068177m -0.054229014869548106m">
          <div class="HotspotAnnotation"><h3>Subsidiary Towers</h3>Smaller supporting towers surrounding the main shrine. Follow the traditional Kalinga temple layout. Provide visual balance and structural harmony. Often associated with subsidiary deities.</div>
      </button>

      <button class="Hotspot" slot="hotspot-7" data-position="0.8542837741519639m -1.957261798408358m -1.2470051002202132m" data-normal="-0.07848740415918834m 0.4769908079952241m 0.8753967651736072m">
          <div class="HotspotAnnotation"><h3>Jagamohana (Assembly Hall)</h3>Congregational hall where devotees gather for worship. Located between the entrance and the main shrine. Designed to accommodate large groups safely. Acts as a transition space to the sanctum.</div>
      </button>

      <button class="Hotspot" slot="hotspot-12" data-position="0.5360795957505438m -3.453914319217133m -4.229035932376426m" data-normal="0.008220999659640823m 0.03487495039243339m 0.9993578703346073m">
          <div class="HotspotAnnotation"><h3>Dedicated to Surya</h3>The temple is dedicated to Surya, the Hindu Sun God. Surya is worshipped as the source of life, energy, and time. The original statue depicted Surya standing, holding lotus flowers, symbolizing purity.</div>
      </button>

 

    </model-viewer> 

    <script>
      const viewer = document.querySelector("#konark-viewer");
      const hotspots = document.querySelectorAll(".Hotspot");
      const masterBtn = document.querySelector("#info-master-button");

      // Toggle points visibility
      masterBtn.addEventListener('click', () => {
        const pointsShown = hotspots[0].classList.contains('show-point');
        hotspots.forEach(h => {
          h.classList.toggle('show-point');
          h.classList.remove('active');
        });
        masterBtn.textContent = pointsShown ? "Show Info Points" : "Hide Info Points";
      });

      // Individual click logic
      hotspots.forEach((hotspot) => {
        hotspot.addEventListener('click', (event) => {
          event.stopPropagation();
          const isActive = hotspot.classList.contains('active');
          hotspots.forEach(h => h.classList.remove('active'));
          if (!isActive) hotspot.classList.add('active');
        });
      });

      // Close if clicking model background
      viewer.addEventListener('click', () => {
        hotspots.forEach(h => h.classList.remove('active'));
      });
    </script>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  </body>
</html>
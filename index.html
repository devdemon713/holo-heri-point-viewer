<!doctype html>
<html lang="en">
  <head>
    <title>Konark Temple Interactive</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    
    <style>
      /* Ensure the body takes up the full screen */
      body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #f5f5f5;
      }

      model-viewer {
        width: 100%;
        height: 100vh;
      }

      /* TOGGLE BUTTON - Using fixed and higher z-index for mobile */
      #info-master-button {
        position: fixed;
        top: 15px;
        right: 15px;
        z-index: 9999; /* Highest priority */
        padding: 10px 18px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 25px;
        font-family: 'Segoe UI', sans-serif;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        -webkit-tap-highlight-color: transparent;
      }

      /* Annotation Box - Adjusted width for mobile screens */
      .HotspotAnnotation {
        display: none; 
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.25);
        padding: 12px;
        position: absolute;
        width: 200px; /* Smaller for mobile */
        left: 20px;
        top: -10px;
        color: #333;
        font-family: sans-serif;
        font-size: 13px;
        line-height: 1.4;
        z-index: 1000;
        pointer-events: none;
        border-left: 4px solid #007bff;
      }

      .HotspotAnnotation b {
        display: block;
        color: #007bff;
        margin-bottom: 4px;
      }

      .Hotspot.active .HotspotAnnotation {
        display: block !important;
      }

      /* Hotspot Dots */
      .Hotspot {
        display: none; /* Hidden by default */
        background: #fff;
        border-radius: 50%;
        width: 20px; /* Slightly smaller for mobile touch */
        height: 20px;
        border: 3px solid #007bff;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        padding: 0;
      }

      .Hotspot.show-point {
        display: block;
      }

      /* AR Button custom placement */
      #ar-button {
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        padding: 10px 20px;
        background-color: white;
        border-radius: 20px;
        border: 1px solid #ccc;
        z-index: 9999;
      }
    </style>
  </head>
  <body>

    <button id="info-master-button">Show Info Points</button>

    <model-viewer id="konark-viewer" 
                  src="finalKonark-v1 (4).glb" 
                  ar ar-modes="webxr scene-viewer quick-look" 
                  camera-controls 
                  touch-action="pan-y"
                  tone-mapping="neutral" 
                  poster="poster.webp" 
                  shadow-intensity="1">

      <button class="Hotspot" slot="hotspot-1" data-position="0.11996549136712897m -0.660297867924796m -4.4235828999931535m" data-normal="-0.947823850017628m 0.25515014115177137m 0.1911239252631453m">
          <div class="HotspotAnnotation"><b>Main Tower (Vimana)</b>Principal shrine of the temple housing the main deity. Tallest structure, symbolizing Mount Meru. Built in the traditional Kalinga Rekha Deula style. Represents spiritual dominance and divine presence.</div>
      </button>

      <button class="Hotspot" slot="hotspot-2" data-position="1.036577382153329m -0.5674720091017866m -4.416159482058665m" data-normal="0.9401525064778996m 0.2853078229403957m 0.18631347437137996m">
          <div class="HotspotAnnotation"><b>Main Tower (Vimana)</b>Principal shrine of the temple housing the main deity. Tallest structure, symbolizing Mount Meru. Built in the traditional Kalinga Rekha Deula style. Represents spiritual dominance and divine presence.</div>
      </button>

      <button class="Hotspot" slot="hotspot-3" data-position="0.8600527644693159m -1.810127178146242m -3.6297291483192353m" data-normal="0.9944476538041479m 0.09018357827068177m -0.054229014869548106m">
          <div class="HotspotAnnotation"><b>Subsidiary Towers</b>Smaller supporting towers surrounding the main shrine. Follow the traditional Kalinga temple layout. Provide visual balance and structural harmony. Often associated with subsidiary deities.</div>
      </button>

      <button class="Hotspot" slot="hotspot-5" data-position="-0.37826918008487875m -1.7633185397736653m -4.344624581895653m" data-normal="-0.9775031129394942m 0.10297211283885144m 0.1840771799303251m">
          <div class="HotspotAnnotation"><b>Subsidiary Towers</b>Smaller supporting towers surrounding the main shrine. Follow the traditional Kalinga temple layout. Provide visual balance and structural harmony. Often associated with subsidiary deities.</div>
      </button>

      <button class="Hotspot" slot="hotspot-7" data-position="0.8542837741519639m -1.957261798408358m -1.2470051002202132m" data-normal="-0.07848740415918834m 0.4769908079952241m 0.8753967651736072m">
          <div class="HotspotAnnotation"><b>Jagamohana (Assembly Hall)</b>Congregational hall where devotees gather for worship. Located between the entrance and the main shrine. Designed to accommodate large groups safely. Acts as a transition space to the sanctum.</div>
      </button>

      <button class="Hotspot" slot="hotspot-9" data-position="-0.507225121310278m -2.125322541126483m -2.015098956156416m" data-normal="-0.9068184247570564m 0.4181626190721036m 0.05310714200453255m">
          <div class="HotspotAnnotation"><b>Jagamohana (Assembly Hall)</b>Congregational hall where devotees gather for worship. Located between the entrance and the main shrine. Designed to accommodate large groups safely. Acts as a transition space to the sanctum.</div>
      </button>

      <button class="Hotspot" slot="hotspot-10" data-position="0.5187906325037172m -3.7098099554956656m -0.5154049424781284m" data-normal="0.01908744330093676m 0.2493435412024196m 0.968226971308314m">
          <div class="HotspotAnnotation"><b>Temple Entrance</b>Ceremonial gateway aligned with the sunâ€™s path. Marks the formal entry into the temple complex. Used during rituals and processions. Symbolizes the shift from outer to sacred space.</div>
      </button>

      <button class="Hotspot" slot="hotspot-12" data-position="0.5360795957505438m -3.453914319217133m -4.229035932376426m" data-normal="0.008220999659640823m 0.03487495039243339m 0.9993578703346073m">
          <div class="HotspotAnnotation"><b>Dedicated to Surya</b>The temple is dedicated to Surya, the Hindu Sun God. Surya is worshipped as the source of life, energy, and time. The original statue depicted Surya standing, holding lotus flowers, symbolizing purity.</div>
      </button>

      <button slot="ar-button" id="ar-button">View in AR</button>

    </model-viewer> 

    <script>
      const viewer = document.querySelector("#konark-viewer");
      const hotspots = document.querySelectorAll(".Hotspot");
      const masterBtn = document.querySelector("#info-master-button");

      masterBtn.addEventListener('click', (e) => {
        e.preventDefault();
        const pointsShown = hotspots[0].classList.contains('show-point');
        
        hotspots.forEach(h => {
          h.classList.toggle('show-point');
          h.classList.remove('active');
        });

        masterBtn.textContent = pointsShown ? "Show Info Points" : "Hide Info Points";
      });

      hotspots.forEach((hotspot) => {
        hotspot.addEventListener('click', (event) => {
          event.stopPropagation();
          const isActive = hotspot.classList.contains('active');
          hotspots.forEach(h => h.classList.remove('active'));
          if (!isActive) hotspot.classList.add('active');
        });
      });

      viewer.addEventListener('click', () => {
        hotspots.forEach(h => h.classList.remove('active'));
      });
    </script>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
  </body>
</html>